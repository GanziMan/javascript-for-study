# ğŸ“˜ JavaScript ì¶”ê°€ ì •ë¦¬ 3 â€” Set Â· Map Â· ì´í„°ëŸ¬ë¸” Â· var Â· this Â· Promise Â· DOM ë“±

## Set

- **ì¤‘ë³µ ë¶ˆê°€**: ë™ì¼í•œ ê°’ì„ ì—¬ëŸ¬ ë²ˆ ë„£ì–´ë„ í•˜ë‚˜ë§Œ ìœ ì§€
- **ìˆœì„œ ë¬´ì˜ë¯¸**: ì¸ë±ìŠ¤ ê°œë…ì´ ì—†ê³ , ìˆœíšŒ ìˆœì„œë§Œ ì¡´ì¬

### ì£¼ìš” ë©”ì„œë“œ/í”„ë¡œí¼í‹°

```js
const s = new Set();

s.add(1); // ê°’ ì¶”ê°€ (ì²´ì´ë‹ ê°€ëŠ¥)
s.has(1); // í¬í•¨ ì—¬ë¶€ -> true
s.delete(1); // ê°’ ì œê±° -> true/false
s.size; // ìš”ì†Œ ê°œìˆ˜
s.clear(); // ì „ë¶€ ì œê±°

// ìˆœíšŒ ê´€ë ¨
s.keys(); // Setì—ì„œëŠ” key == value
s.values(); // ê°’ ì´í„°ë ˆì´í„°
s.entries(); // [value, value] í˜•íƒœì˜ ì´í„°ë ˆì´í„° (Map í˜¸í™˜ì„±ìš©)
```

> **ì°¸ì¡°í˜• ì£¼ì˜**: ê°ì²´/ë°°ì—´ ë“±ì€ **ì°¸ì¡° ë™ì¼ì„±** ê¸°ì¤€ìœ¼ë¡œ ì¤‘ë³µ íŒë‹¨ë©ë‹ˆë‹¤.

### ì´í„°ëŸ¬ë¸”ë¡œì„œì˜ Set

```js
const arr = ["a", "b", "c", "a"];
const set = new Set(arr); // {'a','b','c'}

// for...of ê°€ëŠ¥
for (const v of set) console.log(v);

// ë°°ì—´ ë³€í™˜
const unique = [...set]; // ['a','b','c']
```

---

## Map â€” í‚¤/ê°’ ìŒ ì»¬ë ‰ì…˜

- **ì„ì˜ì˜ ê°’(ì›ì‹œ/ì°¸ì¡°)**ì„ í‚¤ë¡œ ì‚¬ìš© ê°€ëŠ¥ (ê°ì²´ì™€ ì°¨ë³„ì )
- ì¦ì€ **í‚¤/ê°’ ì¶”ê°€Â·ì‚­ì œ**ì— ì í•©í•˜ê²Œ ì„¤ê³„

### ì£¼ìš” ë©”ì„œë“œ/í”„ë¡œí¼í‹°

```js
const m = new Map();

m.set("x", 1); // ì„¤ì • (ì²´ì´ë‹ ê°€ëŠ¥)
m.get("x"); // 1
m.has("x"); // true
m.delete("x"); // true/false
m.size; // í•­ëª© ìˆ˜
m.clear(); // ì „ë¶€ ì œê±°

// ìˆœíšŒ (ì‚½ì… ìˆœì„œ ìœ ì§€)
for (const [k, v] of m) {
  /* ... */
}

// í‚¤ë¡œ ê°ì²´ ì‚¬ìš©
const keyObj = { id: 1 };
m.set(keyObj, "OBJ");
m.get(keyObj); // 'OBJ'
```

### ê°ì²´(Object)ì™€ì˜ ì°¨ì´

- í‚¤ ì œì•½: **ObjectëŠ” ë¬¸ìì—´/Symbol**, **Mapì€ ëª¨ë“  ê°’** ê°€ëŠ¥
- ì„±ëŠ¥: ë³€ê²½ì´ ì¦ì€ ê²½ìš° Mapì´ ìœ ë¦¬
- ìˆœíšŒ/í¬ê¸°: `Map.prototype.size`, ì‚½ì… ìˆœì„œ ìœ ì§€ / `Object.keys().length` í•„ìš”
- ì§ë ¬í™”: JSON ì§ë ¬í™”ëŠ” Object ìš°ìœ„(í•„ìš” ì‹œ ë³€í™˜)

---

## ì´í„°ëŸ¬ë¸”(Iterable)ê³¼ ì´í„°ë ˆì´í„°(Iterator)

### ì´í„°ëŸ¬ë¸”

- `for...of`, ìŠ¤í”„ë ˆë“œ(`...`), ë°°ì—´ ë””ìŠ¤íŠ¸ëŸ­ì²˜ë§ ë“±ì—ì„œ ìˆœíšŒ ê°€ëŠ¥í•œ **ê³µí†µ ê·œì•½**
- `obj[Symbol.iterator]()` ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ì—¬ **ì´í„°ë ˆì´í„°** ë°˜í™˜

**ëŒ€í‘œ ì´í„°ëŸ¬ë¸”**: Array, String, Set, Map, arguments, TypedArray ë“±

### ì´í„°ë ˆì´í„°

- `next()`ë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ `{ value, done }` ë°˜í™˜

```js
const arr = [1, "a", true, null, { x: 1, y: 2 }];
const iter = arr[Symbol.iterator]();

iter.next(); // { value: 1, done: false }
iter.next(); // { value: 'a', done: false }
// ...
iter.next(); // { value: undefined, done: true }
```

---

## ì œë„¤ë ˆì´í„°(Generator)

- ì‹¤í–‰ íë¦„ì„ **ì¤‘ë‹¨/ì¬ê°œ**í•  ìˆ˜ ìˆëŠ” íŠ¹ë³„í•œ í•¨ìˆ˜
- ì´í„°ëŸ¬ë¸”ê³¼ ì´í„°ë ˆì´í„°ë¥¼ **ê°„ê²°**í•˜ê²Œ êµ¬í˜„ ê°€ëŠ¥

```js
function* counter(n = 3) {
  let i = 0;
  while (i < n) {
    yield i++; // í˜¸ì¶œìì—ê²Œ ê°’ ì „ë‹¬ ë° ì¼ì‹œì¤‘ë‹¨
  }
}

const g = counter(3);
g.next(); // { value: 0, done: false }
g.next(); // { value: 1, done: false }
g.next(); // { value: 2, done: false }
g.next(); // { value: undefined, done: true }
```

> `g.throw(err)`, `g.return(value)`ë¡œ ì œì–´í•  ìˆ˜ ìˆìœ¼ë©°, try/catchë¡œ ì—ëŸ¬ íë¦„ë„ êµ¬ì„± ê°€ëŠ¥.

---

## ì—ëŸ¬ í•¸ë“¤ë§

- JSëŠ” ì²˜ë¦¬í•˜ì§€ ëª»í•œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ **í”„ë¡œì„¸ìŠ¤ë¥¼ ì¤‘ë‹¨**í•  ìˆ˜ ìˆìŒ â†’ **try/catch/finally** ì‚¬ìš©

```js
try {
  // ì—ëŸ¬ ê°€ëŠ¥ ì½”ë“œ
} catch (err) {
  // ë³µêµ¬/ë¡œê¹…
} finally {
  // ì„±ê³µ/ì‹¤íŒ¨ ë¬´ê´€íˆ í•œ ë²ˆ ì‹¤í–‰ (ë¦¬ì†ŒìŠ¤ í•´ì œ ë“±)
}
```

### Error ê°ì²´

- ì˜ˆì™¸ë¡œ **ë˜ì ¸ì§€ëŠ”(thrown)** í‘œì¤€ ê°ì²´
- ì§ì ‘ ìƒì„±/ë˜ì§€ê¸°ë„ ê°€ëŠ¥

```js
throw new Error("ì˜ëª»ëœ ìš”ì²­");
```

---

## `var` â€” êµ¬ì‹œëŒ€ì˜ ìœ ë¬¼

- `let`/`const` ë„ì… ì „ ë³€ìˆ˜ ì„ ì–¸ í‚¤ì›Œë“œ
- **í•¨ìˆ˜ ìŠ¤ì½”í”„**ë§Œ ê°€ì§(ë¸”ë¡ ìŠ¤ì½”í”„ X) â†’ ë‹¤ì–‘í•œ ë²„ê·¸ì˜ ì›ì¸

### ì„ ì–¸ ì—†ì´ë„ ì‚¬ìš©(ë¹„ê¶Œì¥)

```js
notDeclared = 1; // ì•”ë¬µì ìœ¼ë¡œ ì „ì—­ var (ë¹„ì—„ê²© ëª¨ë“œ)
console.log(notDeclared);
```

### ì¬ì„ ì–¸ ê°€ëŠ¥ (ì¶©ëŒ/ë²„ê·¸ ìœ ë°œ)

```js
var a = 1;
var a = 2; // ì˜¤ë¥˜ ì—†ìŒ
```

### IIFEë¡œ ìŠ¤ì½”í”„ ê²©ë¦¬ (ê³¼ê±° íŒ¨í„´)

```js
for (var i = 0; i < 3; i++) {
  (function (j) {
    setTimeout(() => console.log(j), 100);
  })(i);
}
// 0 1 2
```

### í˜¸ì´ìŠ¤íŒ…ê³¼ TDZ

- `var`ëŠ” **í˜¸ì´ìŠ¤íŒ… + undefined ì´ˆê¸°í™”**
- `let/const`ë„ í˜¸ì´ìŠ¤íŒ…ë˜ì§€ë§Œ **TDZ(Temporal Dead Zone)** ë•Œë¬¸ì— ì„ ì–¸ ì „ ì ‘ê·¼ ì‹œ ì˜¤ë¥˜

```js
console.log(v); // undefined
var v = "hello";

console.log(l); // ReferenceError
let l = "hello";
```

### ì—„ê²© ëª¨ë“œ(Strict Mode)

```js
"use strict";
notDeclared = 1; // ReferenceError
// ES6 í´ë˜ìŠ¤/ëª¨ë“ˆì€ ê¸°ë³¸ì ìœ¼ë¡œ ì—„ê²© ëª¨ë“œ
```

---

## ì˜µì…”ë„ ì²´ì´ë‹(Optional Chaining)

- **ì—†ì„ ìˆ˜ ìˆëŠ”** ê²½ë¡œ ì ‘ê·¼ ì‹œ ì—ëŸ¬ ëŒ€ì‹  `undefined` ë°˜í™˜

```js
const city = user?.profile?.address?.city;
user?.doSomething?.();
```

---

## ë ‰ì‹œì»¬(ì •ì ) ìŠ¤ì½”í”„ & ë ‰ì‹œì»¬ í™˜ê²½

- **ì„ ì–¸ ìœ„ì¹˜**ë¡œ ìŠ¤ì½”í”„ê°€ ê²°ì • (í˜¸ì¶œ ìœ„ì¹˜ ì•„ë‹˜)
- ê° ìŠ¤ì½”í”„ëŠ” ì‹¤í–‰ ì „ **ë ‰ì‹œì»¬ í™˜ê²½**(í™˜ê²½ ë ˆì½”ë“œ + ì™¸ë¶€ ì°¸ì¡°)ì„ ê°–ëŠ”ë‹¤.

### í´ë¡œì €(Closure)

- ë‚´ë¶€ í•¨ìˆ˜ê°€ ì™¸ë¶€ í•¨ìˆ˜ì˜ ì‹ë³„ìì— ì ‘ê·¼í•˜ëŠ” í˜„ìƒ/êµ¬ì¡°

```js
function makeCounter() {
  let c = 0;
  return () => ++c;
}
const inc = makeCounter();
inc(); // 1
inc(); // 2
```

---

## `this`

- **í˜¸ì¶œ ë°©ì‹**ì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ” ë™ì  ë°”ì¸ë”© (í™”ì‚´í‘œ í•¨ìˆ˜ ì œì™¸)

### ì „ì—­ì—ì„œì˜ this

- ë¸Œë¼ìš°ì € ì½˜ì†”: `window`
- Node REPL: `global`
- ëª¨ë“ˆ(.mjs/.cjs) íŒŒì¼: **ì—„ê²© ëª¨ë“œ** ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì „ì—­ `this`ëŠ” `undefined` ë˜ëŠ” ë¹ˆ ê°ì²´ì²˜ëŸ¼ ë³´ì¼ ìˆ˜ ìˆìŒ

### í•¨ìˆ˜ì—ì„œì˜ this

```js
function f() {
  console.log(this);
}

f(); // ë¹„ì—„ê²©: globalThis / ì—„ê²©: undefined

const o = { f };
o.f(); // o

new f(); // ìƒˆ ì¸ìŠ¤í„´ìŠ¤(ìƒì„±ì ì»¨í…ìŠ¤íŠ¸)
```

### ê°ì²´ ë¬¸ë§¥ì˜ this (í™”ì‚´í‘œ ì œì™¸)

```js
const obj = {
  x: 123,
  getX: function () {
    return this.x;
  }, // 123
};
```

### ìƒì„±ì/í´ë˜ìŠ¤ì˜ this

```js
function Person(name, age) {
  this.name = name;
  this.age = age;
}

class PersonC {
  constructor(name, age) {
    this.name = name;
    this.age = age;
  }
}
```

### í™”ì‚´í‘œ í•¨ìˆ˜ì™€ this (ì •ì  ë°”ì¸ë”©)

- **ì„ ì–¸ ì‹œì˜ ìƒìœ„ ë ‰ì‹œì»¬ this**ë¥¼ ìº¡ì²˜ (call/apply/bindë¡œ ë³€ê²½ ë¶ˆê°€)

```js
const o = {
  x: 1,
  arrow: () => this, // ìƒìœ„ this(ì „ì—­ ë“±)ë¥¼ ì°¸ì¡°
  method() {
    return this;
  }, // o
};
```

---

## ë°°ì—´ ê³ ì°¨í•¨ìˆ˜ì™€ `thisArg`

### forEach

- ì¤‘ë‹¨ ë¶ˆê°€(break/continue X), ì˜ˆì™¸ë¡œë§Œ ì¤‘ë‹¨
- ì½œë°±: `(value, index, array)`

### `thisArg`

```js
const ctx = { factor: 10 };
[1, 2, 3].map(function (v) {
  return v * this.factor;
}, ctx); // [10,20,30]
```

---

## ê°ì²´ì˜ í•¨ìˆ˜ í˜•íƒœ ë¹„êµ

```js
const obj = {
  func1: function () {
    return true;
  }, // function ì„ ì–¸ í˜•íƒœ
  func2() {
    return true;
  }, // ë©”ì„œë“œ ì¶•ì•½
  func3: () => true, // í™”ì‚´í‘œ í•¨ìˆ˜
};
```

| êµ¬ë¶„               | ìƒì„±ì ì—­í•  | prototype | arguments | super |
| ------------------ | ----------- | --------- | --------- | ----- |
| function ì„ ì–¸ í•¨ìˆ˜ | O           | O         | O         | X     |
| ë©”ì„œë“œ(ì¶•ì•½)       | X           | X         | O         | O     |
| í™”ì‚´í‘œ í•¨ìˆ˜        | X           | X         | X         | X     |

---

## Promise

- ë¹„ë™ê¸° ê²°ê³¼ì— ëŒ€í•œ **ì¶”ìƒí™”**
- then/catch/finally ì²´ì¸ìœ¼ë¡œ **ì¤‘ì²© ì½œë°± ì§€ì˜¥** ì™„í™”

### ì¡°í•©ê¸°(Combinator)

- `Promise.all` : ëª¨ë‘ **ì„±ê³µ** ì‹œ ë°°ì—´ë¡œ, í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨ ì‹œ **reject**
- `Promise.allSettled` : ì„±ê³µ/ì‹¤íŒ¨ ë¬´ê´€ ëª¨ë“  ê²°ê³¼ ë°°ì—´ ë°˜í™˜
- `Promise.any` : **ê°€ì¥ ë¨¼ì € ì„±ê³µ**í•œ ê²°ê³¼ ë°˜í™˜, ì „ë¶€ ì‹¤íŒ¨ ì‹œ AggregateError
- `Promise.race` : **ê°€ì¥ ë¨¼ì € settle(ì„±ê³µ/ì‹¤íŒ¨)** ëœ ê²°ê³¼ ë°˜í™˜

```js
await Promise.all([p1, p2]);
await Promise.allSettled([p1, p2]);
await Promise.any([p1, p2]);
await Promise.race([p1, p2]);
```

## Async/Await

- `async` í•¨ìˆ˜ëŠ” í•­ìƒ Promise ë°˜í™˜
- `await`ëŠ” Promise settleê¹Œì§€ **ì¼ì‹œ ì¤‘ë‹¨**í•˜ì—¬ ê°’ì„ ë°›ìŒ

```js
async function main() {
  try {
    const data = await fetch("/api").then((r) => r.json());
    console.log(data);
  } catch (e) {
    console.error(e);
  }
}
```

---

## HTMLì˜ `async`/`defer` (ìŠ¤í¬ë¦½íŠ¸ ë¡œë”©)

```html
<script src="app.js" async></script>
<script src="app.js" defer></script>
```

- `async` : ë‹¤ìš´ë¡œë“œì™€ ë³‘ë ¬, **ë„ì°© ì¦‰ì‹œ ì‹¤í–‰**(DOM íŒŒì‹± **ì¼ì‹œ ì¤‘ë‹¨**). **ë¡œë“œ ìˆœì„œ ë³´ì¥ X**.
- `defer` : ë‹¤ìš´ë¡œë“œì™€ ë³‘ë ¬, **DOM íŒŒì‹± ì™„ë£Œ í›„ ì‹¤í–‰**. **ë¬¸ì„œ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰**.

---

## ì›¹íŒ©(Webpack) & ë°”ë²¨(Babel)

- **Webpack**: ë²ˆë“¤ëŸ¬. ì½”ë“œ/ìì‚°ì„ ë¬¶ê³  ì••ì¶•í•˜ì—¬ ë¡œë”© ì„±ëŠ¥ ê°œì„ . ë¡œë”/í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ë³€í™˜/ìµœì í™”.
- **Babel**: ìµœì‹  JSë¥¼ êµ¬í˜• í™˜ê²½ì—ì„œë„ ëŒì•„ê°€ê²Œ **íŠ¸ëœìŠ¤íŒŒì¼**.

---

## JSDoc

- ì£¼ì„ ê¸°ë°˜ **íƒ€ì… íŒíŠ¸**ì™€ **IDE ì¸í…”ë¦¬ì„¼ìŠ¤**ë¥¼ ê°•í™”

```js
/**
 * @param {number} a
 * @param {number} b
 * @returns {number}
 */
function add(a, b) {
  return a + b;
}
```

---

## DOM ìš”ì†Œ ì¡°ì‘

```js
const $carrot = document.querySelector("section > ul > li");
```

### `textContent` (Node)

- ëª¨ë“  í…ìŠ¤íŠ¸ ë…¸ë“œë¥¼ **ê·¸ëŒ€ë¡œ** ë‹¤ë£¸(ë Œë”ë§ ì˜í–¥ X) â†’ **ë¹ ë¥´ê³  ì˜ˆì¸¡ ê°€ëŠ¥**

```js
$carrot.textContent = "ì œì£¼ë‹¹ê·¼";
```

### `nodeValue` (Node)

- **í…ìŠ¤íŠ¸ ë…¸ë“œ ì „ìš©** ì ‘ê·¼ì (ë‹¤ë¥¸ ë…¸ë“œì—ì„œëŠ” `null`)

```js
$carrot.firstChild.nodeValue = "ì œì£¼ë‹¹ê·¼";
```

### `className` (Element)

- í´ë˜ìŠ¤ ì „ì²´ ë¬¸ìì—´ì„ êµì²´

```js
$carrot.className = "item active";
```

> ì‹¤ë¬´ì—ì„œëŠ” í† ê¸€/ì¶”ê°€/ì œê±°ê°€ í¸í•œ **`classList`** ê¶Œì¥:

```js
$carrot.classList.add("active");
$carrot.classList.remove("hidden");
$carrot.classList.toggle("selected", true);
```

---

## ë³´ë„ˆìŠ¤: Optional Tip

- Set/Mapì„ JSONìœ¼ë¡œ ì €ì¥í•´ì•¼ í•œë‹¤ë©´ **ë³€í™˜ ë¡œì§**ì„ ë‘ì.

```js
const m = new Map([
  ["x", 1],
  ["y", 2],
]);
const json = JSON.stringify(Array.from(m)); // ì§ë ¬í™”
const back = new Map(JSON.parse(json)); // ì—­ì§ë ¬í™”
```
